import { Head, Image, Appear } from "mdx-deck";

import Code from "./Code";
import Cover from "./Cover";
import Intro from "./Intro";
import Website from "./Website";
import Thanks from "./Thanks";
export { default as theme } from "./theme";
export * as components from "./components";
import LearnInPublic from './LearnInPublic'
import Practice from './Practice'


<Head>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;700&display=swap"
    rel="stylesheet"
  />
  <link href="https://fonts.cdnfonts.com/css/cascadia-code" rel="stylesheet" />
  <title>DX with Node Js - How to improve your developing experience with Node Js</title>
</Head>

<Cover />

---

<Intro />

---

# Overview

<ul>
  <li>Introduction</li>
  <li>Learn in Public</li>
  <li>Draw and Architect</li>
  <li>Documentation</li>
  <li>Concepts</li>
  <li>APIs</li>
  <li>Test</li>
  <li>Observability</li>
  <li>References</li>
  <li>Conclusion</li>
</ul>

---

# Introduction

<ul>
  <Appear>
    <li>Problem</li>
    <li>Why</li>
    <li>How to Improve</li>
  </Appear>
</ul>

---

<LearnInPublic />

---

# Learn in Public

<ul>
  <Appear>
    <li>Write/talk about everything that you're learn</li>
    <li>Try to teach at least three different person</li>
    <li>Cone of Learning</li>
  </Appear>
</ul>

---

# Learn in Public - Read List

- [Learn in Public](https://dev.to/daniloab/how-to-learn-in-public-9ng)
- [How to put the Learning in Public in practice](https://dev.to/daniloab/ways-to-put-the-learning-in-public-in-practice-4h2c)
- [How to avoid frustration while learning something new](https://dev.to/daniloab/why-getting-frustrated-is-too-boring-578p)

---

<Practice />

---

# Draw and Architect

<ul>
  <Appear>
    <li>Clear path of the problem</li>
    <li>Enhanced communication</li>
    <li>Process</li>
    <li>Tools: excalidraw, figma, mermaid</li>
  </Appear>
</ul>

---

# Draw and Architect - Excalidraw

<div>
 <img src='./img/draw-architect-excalidraw.png' width='1500px' />
</div>

---

# Draw and Architect - Figma

<div>
 <img src='./img/draw-architect-figma.png' width='1000px' />
</div>

---

# Comparison with Standard Views

<ul>
  <Appear>
    <li>MongoDB offer both</li>
    <li>Materialized is saved on disk</li>
    <li>$merge or $out stage to update the saved data</li>
    <li>both results from aggregation pipeline</li>
  </Appear>
</ul>

---

# Indexes and Performance

<ul>
  <Appear>
    <li>Standard use indexes from underlying collection</li>
    <li>Materialized can has it own indexes</li>
    <li>Materialized allow faster access to data reading from disk</li>
  </Appear>
</ul>

---

# How do materialized views work?

<ul>
  <Appear>
    <li>aggregate performs the calc</li>
    <li>$merge writes the output, update matched previous results</li>
    <li>Regularly updates</li>
    <li>Jobs</li>
  </Appear>
</ul>

---

# Benefits of using materialized views

<ul>
  <Appear>
    <li>Deliver high-quality software</li>
    <li>Allow faster access to data</li>
    <li>Benefits in data privacy</li>
    <li>Increase of performance</li>
    <li>Split in databases</li>
    <li>Simplify complex queries</li>
    <li>Big O of queries</li>
  </Appear>
</ul>

---

# Use cases for materialized views in MongoDB

<ul>
  <Appear>
    <li>Complex analytics queries</li>
    <li>Improve performance</li>
    <li>Support for real time dashboards</li>
    <li>Cache frequently accessed data</li>
    <li>Abstract data from many collections/tables into only one</li>
  </Appear>
</ul>

---

# $merge and $out stage

<ul>
  <Appear>
      <li>Can output to a collection in the same or different database.</li>
      <li>Creates a new collection if the output collection does not already exist.</li>
      <li>Can incorporate results (insert new documents, merge documents, replace documents, keep existing documents, fail the operation, process documents with a custom update pipeline) into an existing collection.</li>
      <li>Can output to a sharded collection. Input collection can also be sharded.</li>
      <li>Merge save/update a result in a collection</li>
      <li>Out save/replace a result in a collection</li>
  </Appear>
</ul>

---

<Code
  title="Materialized Views with Merge Stage"
  code={require("!raw-loader!./code/mv-merge.ts")}
  showNumbers={false}
  dark={true}
  lang="ts"
/>

---

<Code
  title="Materialized Views with Out Stage"
  code={require("!raw-loader!./code/mv-out.ts")}
  showNumbers={false}
  dark={true}
  lang="ts"
/>

---

# Best practices for using materialized views

<ul>
  <Appear>
    <li>Updated regularly</li>
    <li>Careful with pipeline stages</li>
    <li>Good use of indexes with group stage</li>
    <li>Chunk Size</li>
    <li>Shard Key</li>
  </Appear>
</ul>

---

# Drawbacks of using materialized views

<ul>
  <Appear>
    <li>Increased Storage</li>
    <li>Write Latency</li>
    <li>Increased complexity</li>
    <li>Stale data</li>
  </Appear>
</ul>

---

# References

- [On-Demand Materialized Views](https://www.mongodb.com/docs/manual/core/materialized-views/)
- [View And Materialized View In MongoDB](https://mydbops.wordpress.com/2023/02/09/view-and-materialized-view-in-mongodb/)
- [MongoDB View](https://devopedia.org/mongodb-view)
- [On Demand Materialized Views: A Scalable Solution for Graphs, Analysis or Machine Learning](https://towardsdatascience.com/on-demand-materialized-views-a-scalable-solution-for-graphs-analysis-or-machine-learning-w-d3816af28f1)
- [How to create and manage Mongo DB Materialized Views using triggers.](https://bonigopalan.medium.com/how-to-create-and-manage-mongo-db-materialized-views-using-triggers-a2fb58a4d1a0)
- [$merge aggregation docs](https://www.mongodb.com/docs/manual/reference/operator/aggregation/merge/#mongodb-pipeline-pipe.-merge)
- [$out aggregation docs](https://www.mongodb.com/docs/manual/reference/operator/aggregation/out/#mongodb-pipeline-pipe.-out)


---

<Website />

---

<Thanks />
